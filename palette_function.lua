--256种颜色代码表
ColorTable = {
    "ffcdd2","f8bbd0","e1bee7","d1c4e9","c5cae9","bbdefb","b3e5fc","b2ebf2","b2dfdb","c8e6c9","dcedc8","f0f4c3","fff9c4","ffecb3","ffe0b2","ffccbc",    "-1","000000",
	"ef9a9a","f48fb1","ce93d8","b39ddb","9fa8da","90caf9","81d4fa","80deea","80cbc4","a5d6a7","c5e1a5","e6ee9c","fff59d","ffe082","ffcc80","ffab91","d7ccc8","ffffff",
	"e57373","f06292","ba68c8","9575cd","7986cb","64b5f6","4fc3f7","4dd0e1","4db6ac","81c784","aed581","dce775","fff176","ffd54f","ffb74d","ff8a65","bcaaa4","eeeeee",
	"ef5350","ec407a","ab47bc","7e57c2","5c6bc0","42a5f5","29b6f6","26c6da","26a69a","66bb6a","9ccc65","d4e157","ffee58","ffca28","ffa726","ff7043","a1887f","e0e0e0",
	"f44336","e91e63","9c27b0","673ab7","3f51b5","2196f3","03a9f4","00bcd4","009688","4caf50","8bc34a","cddc39","ffeb3b","ffc107","ff9800","ff5722","8d6e63","bdbdbd",
	"e53935","d81b60","8e24aa","5e35b1","3949ab","1e88e5","039be5","00acc1","00897b","43a047","7cb342","c0ca33","fdd835","ffb300","fb8c00","f4511e","795548","9e9e9e",
	"d32f2f","c2185b","7b1fa2","512da8","303f9f","1976d2","0288d1","0097a7","00796b","388e3c","689f38","afb42b","fbc02d","ffa000","f57c00","e64a19","6d4c41","757575",
	"c62828","ad1457","6a1b9a","4527a0","283593","1565c0","0277bd","00838f","00695c","2e7d32","558b2f","9e9d24","f9a825","ff8f00","ef6c00","d84315","5d4037","616161",
	"b71c1c","880e4f","4a148c","311b92","1a237e","0d47a1","01579b","006064","004d40","1b5e20","33691e","827717","f57f17","ff6f00","e65100","bf360c","4e342e","424242",
	"d50000","c51162","aa00ff","6200ea","304ffe","2962ff","0091ea","00b8d4","00bfa5","00c853","64dd17","aeea00","ffd600","ffab00","ff6d00","dd2c00","3e2723","212121",
	"ff1744","f50057","d500f9","651fff","3d5afe","2979ff","00b0ff","00e5ff","1de9b6","00e676","76ff03","c6ff00","ffea00","ffc400","ff9100","ff3d00","eceff1","607d8b",
	"ff5252","ff4081","e040fb","7c4dff","536dfe","448aff","40c4ff","18ffff","64ffda","69f0ae","b2ff59","eeff41","ffff00","ffd740","ffab40","ff6e40","cfd8dc","546e7a",
	"ff8a80","ff80ab","ea80fc","b388ff","8c9eff","82b1ff","80d8ff","84ffff","a7ffeb","b9f6ca","ccff90","f4ff81","ffff8d","ffe57f","ffd180","ff9e80","90a4ae","37474f",
	"fce0e3","fad8e3","efd5f3","e8e0f7","dfe2f5","d6eafb","d9f3ff","d1f5f9","d1f0ed","ddf2de","edf9df","f8fbdb","fffcdd","fff4d5","ffefd7","ffe3e0","78909c","263238",
	"000000","000000","000000","000000"}

ColorNameTable = {
    "6035:1" ,"6036:1" ,"6037:1" ,"6038:1" ,"6039:1" ,"6040:1" ,"6041:1" ,"6042:1" ,"6043:1" ,"6044:1" ,"6045:1" ,"6046:1" ,"6047:1" ,"6048:1" ,"6049:1" ,"6050:1" ,"6055:0" ,"6053:0",
    "6035:2" ,"6036:2" ,"6037:2" ,"6038:2" ,"6039:2" ,"6040:2" ,"6041:2" ,"6042:2" ,"6043:2" ,"6044:2" ,"6045:2" ,"6046:2" ,"6047:2" ,"6048:2" ,"6049:2" ,"6050:2" ,"6051:1" ,"6054:0",
    "6035:3" ,"6036:3" ,"6037:3" ,"6038:3" ,"6039:3" ,"6040:3" ,"6041:3" ,"6042:3" ,"6043:3" ,"6044:3" ,"6045:3" ,"6046:3" ,"6047:3" ,"6048:3" ,"6049:3" ,"6050:3" ,"6051:2" ,"6052:1",
    "6035:4" ,"6036:4" ,"6037:4" ,"6038:4" ,"6039:4" ,"6040:4" ,"6041:4" ,"6042:4" ,"6043:4" ,"6044:4" ,"6045:4" ,"6046:4" ,"6047:4" ,"6048:4" ,"6049:4" ,"6050:4" ,"6051:3" ,"6052:2",
    "6035:5" ,"6036:5" ,"6037:5" ,"6038:5" ,"6039:5" ,"6040:5" ,"6041:5" ,"6042:5" ,"6043:5" ,"6044:5" ,"6045:5" ,"6046:5" ,"6047:5" ,"6048:5" ,"6049:5" ,"6050:5" ,"6051:4" ,"6052:3",
    "6035:6" ,"6036:6" ,"6037:6" ,"6038:6" ,"6039:6" ,"6040:6" ,"6041:6" ,"6042:6" ,"6043:6" ,"6044:6" ,"6045:6" ,"6046:6" ,"6047:6" ,"6048:6" ,"6049:6" ,"6050:6" ,"6051:5" ,"6052:4",
    "6035:7" ,"6036:7" ,"6037:7" ,"6038:7" ,"6039:7" ,"6040:7" ,"6041:7" ,"6042:7" ,"6043:7" ,"6044:7" ,"6045:7" ,"6046:7" ,"6047:7" ,"6048:7" ,"6049:7" ,"6050:7" ,"6051:6" ,"6052:5",
    "6035:8" ,"6036:8" ,"6037:8" ,"6038:8" ,"6039:8" ,"6040:8" ,"6041:8" ,"6042:8" ,"6043:8" ,"6044:8" ,"6045:8" ,"6046:8" ,"6047:8" ,"6048:8" ,"6049:8" ,"6050:8" ,"6051:7" ,"6052:6",
    "6035:9" ,"6036:9" ,"6037:9" ,"6038:9" ,"6039:9" ,"6040:9" ,"6041:9" ,"6042:9" ,"6043:9" ,"6044:9" ,"6045:9" ,"6046:9" ,"6047:9" ,"6048:9" ,"6049:9" ,"6050:9" ,"6051:8" ,"6052:7",
    "6035:10","6036:10","6037:10","6038:10","6039:10","6040:10","6041:10","6042:10","6043:10","6044:10","6045:10","6046:10","6047:10","6048:10","6049:10","6050:10","6051:9", "6052:8",
    "6035:11","6036:11","6037:11","6038:11","6039:11","6040:11","6041:11","6042:11","6043:11","6044:11","6045:11","6046:11","6047:11","6048:11","6049:11","6050:11","6052:13","6052:9",
    "6035:12","6036:12","6037:12","6038:12","6039:12","6040:12","6041:12","6042:12","6043:12","6044:12","6045:12","6046:12","6047:12","6048:12","6049:12","6050:12","6052:14","6052:10",
    "6035:13","6036:13","6037:13","6038:13","6039:13","6040:13","6041:13","6042:13","6043:13","6044:13","6045:13","6046:13","6047:13","6048:13","6049:13","6050:13","6052:15","6052:11",
    "6035:14","6036:14","6037:14","6038:14","6039:14","6040:14","6041:14","6042:14","6043:14","6044:14","6045:14","6046:14","6047:14","6048:14","6049:14","6050:14","6052:16","6052:12"}

ColorBlockIdTable = {
    {BlockIdTable={667,633,600,616,650,1120,270,1207}, ColorTable={"ffffff","f8bbd0","e1bee7","d1c4e9","c5cae9","bbdefb","b3e5fc","b2ebf2","b2dfdb","c8e6c9","dcedc8","f0f4c3","fff9c4","ffecb3","ffe0b2","ffccbc"}},		--白色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    
    {BlockIdTable={1960,1924,1900,1912,1936,1972,0,1948}, ColorTable={"ff3d00"}},		--落日橙色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、硬质玻璃块
    {BlockIdTable={1961,1925,1901,1913,1937,1973,0,1949}, ColorTable={"ffab40"}},		--秋叶橙色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、硬质玻璃块
    {BlockIdTable={1962,1926,1902,1914,1938,1974,0,1950}, ColorTable={"311b92"}},		--花青紫色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、硬质玻璃块
    {BlockIdTable={1963,1927,1903,1915,1939,1975,0,1951}, ColorTable={"aeea00"}},		--杨柳绿色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、硬质玻璃块
    {BlockIdTable={1964,1928,1904,1916,1940,1976,0,1952}, ColorTable={"fff176"}},		--柠檬黄色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、硬质玻璃块
    {BlockIdTable={1965,1929,1905,1917,1941,1977,0,1953}, ColorTable={"ffcc80"}},		--肉桂橙色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、硬质玻璃块
    {BlockIdTable={1966,1930,1906,1918,1942,1978,0,1954}, ColorTable={"b39ddb"}},		--丁香紫色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、硬质玻璃块
    {BlockIdTable={1967,1931,1907,1919,1943,1979,0,1955}, ColorTable={"827717"}},		--琥珀黄色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、硬质玻璃块
    {BlockIdTable={1968,1932,1908,1920,1944,1980,0,1956}, ColorTable={"1a237e"}},		--藏青蓝色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、硬质玻璃块
    {BlockIdTable={1969,1933,1909,1921,1945,1981,0,1957}, ColorTable={"795548"}},		--焦糖橙色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、硬质玻璃块
    {BlockIdTable={1970,1934,1910,1922,1946,1982,0,1958}, ColorTable={"4a148c"}},		--玄黛紫色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、硬质玻璃块
    {BlockIdTable={1971,1935,1911,1923,1947,1983,0,1959}, ColorTable={"1b5e20"}},		--竹青绿色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、硬质玻璃块

    {BlockIdTable={668,634,601,617,651,1121,271,1208}, ColorTable={"ef6c00","ffcdd2","ef9a9a","f48fb1","ce93d8","b39ddb","9fa8da","fff176","81d4fa","80deea","80cbc4","a5d6a7","c5e1a5","e6ee9c","fff59d","ffe082"}},		--橙色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    {BlockIdTable={669,635,602,618,652,1122,272,1209}, ColorTable={"9c27b0","ffab91","d7ccc8","000000","e57373","039be5","ba68c8","9575cd","7986cb","64b5f6","4fc3f7","4dd0e1","4db6ac","81c784","aed581","dce775"}},		--紫红硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    {BlockIdTable={670,636,603,619,653,1123,273,1210}, ColorTable={"90caf9","ffd54f","ffb74d","ff8a65","bcaaa4","eeeeee","ef5350","ec407a","ab47bc","7e57c2","5c6bc0","42a5f5","29b6f6","26c6da","26a69a","66bb6a"}},		--淡蓝硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    {BlockIdTable={671,637,604,620,654,1124,274,1211}, ColorTable={"ffd740","d4e157","ffee58","ffca28","ffa726","ff7043","a1887f","e0e0e0","f44336","e91e63","ffcc80","673ab7","3f51b5","2196f3","03a9f4","00bcd4"}},		--黄色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    {BlockIdTable={672,638,605,621,655,1125,275,1212}, ColorTable={"cddc39","4caf50","8bc34a","009688","ffeb3b","ffc107","ff9800","ff5722","8d6e63","4e342e","e53935","d81b60","8e24aa","5e35b1","3949ab","ff6d00"}},		--淡绿硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    {BlockIdTable={673,639,606,622,656,1126,276,1213}, ColorTable={"f06292","00acc1","00897b","43a047","7cb342","c0ca33","fdd835","ffb300","fb8c00","f4511e","795548","9e9e9e","d32f2f","c2185b","7b1fa2","512da8"}},		--粉色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    {BlockIdTable={674,640,607,623,657,1127,283,1214}, ColorTable={"616161","1976d2","0288d1","0097a7","00796b","388e3c","689f38","afb42b","fbc02d","ffa000","f57c00","e64a19","6d4c41","757575","a7ffeb","ad1457"}},		--灰色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    {BlockIdTable={675,641,608,624,658,1128,284,1215}, ColorTable={"bdbdbd","4527a0","283593","1565c0","0277bd","00838f","00695c","b2ff59","558b2f","9e9d24","f9a825","ff8f00","d9f3ff","d84315","ffea00","303f9f"}},		--淡灰硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    {BlockIdTable={676,642,609,625,659,1129,279,1216}, ColorTable={"00bfa5","880e4f","4a148c","311b92","1a237e","0d47a1","01579b","006064","004d40","1b5e20","33691e","827717","f57f17","ff6f00","e65100","bf360c"}},		--青色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    {BlockIdTable={677,643,610,626,660,1130,280,1217}, ColorTable={"6a1b9a","424242","d50000","c51162","aa00ff","6200ea","304ffe","2962ff","0091ea","00b8d4","b71c1c","00c853","64dd17","aeea00","ffd600","ffab00"}},		--紫色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    {BlockIdTable={678,644,611,627,661,1131,281,1218}, ColorTable={"1e88e5","dd2c00","3e2723","000000","ff1744","f50057","d500f9","651fff","3d5afe","2979ff","00b0ff","00e5ff","1de9b6","00e676","76ff03","c6ff00"}},		--蓝色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    {BlockIdTable={679,645,612,628,662,1132,282,1219}, ColorTable={"5d4037","ffc400","ff9100","ff3d00","eceff1","607d8b","ff5252","ff4081","e040fb","7c4dff","536dfe","448aff","40c4ff","18ffff","64ffda","69f0ae"}},		--褐色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    {BlockIdTable={680,646,613,629,663,1133,277,1220}, ColorTable={"2e7d32","eeff41","ffff00","9ccc65","ffab40","ff6e40","cfd8dc","546e7a","ff8a80","ff80ab","ea80fc","b388ff","8c9eff","82b1ff","80d8ff","84ffff"}},		--绿色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    {BlockIdTable={681,647,614,630,664,1134,278,1221}, ColorTable={"c62828","b9f6ca","ccff90","f4ff81","ffff8d","ffe57f","ffd180","ff9e80","90a4ae","37474f","fce0e3","fad8e3","efd5f3","e8e0f7","dfe2f5","d6eafb"}},		--红色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
    {BlockIdTable={682,648,615,631,665,1135,285,1222}, ColorTable={"212121","d1f5f9","d1f0ed","ddf2de","edf9df","f8fbdb","fffcdd","fff4d5","ffefd7","ffe3e0","78909c","263238","000000","000000","000000","000000"}},		--黑色硬砂块、玻璃块、羊毛、毛毡、玻璃片、旧铁块、星光孢子块
}
NumTotal = 252
	
GameMakerTeamColor = { tonumber("e53935",16), tonumber("1e88e5", 16), tonumber("43a047", 16), tonumber("fdd835", 16), tonumber("fb8c00", 16), tonumber("5e35b1", 16) }
HistoryColorTable = {[1]="",[2]="",[3]="",[4]="",[5]=""}

local ColorBlockIds = {}

function InitColorBlockIds()
    for i=1, #(ColorBlockIdTable) do
        for j=1, #(ColorBlockIdTable[i].BlockIdTable) do
            ColorBlockIds[ColorBlockIdTable[i].BlockIdTable[j]] = 1
        end
    end
end
InitColorBlockIds()

function getSimilarColor(color)
    local colorStr = string.format("%x", color)
    local lackLen = 6 - string.len(colorStr);
    for i=1, lackLen do
        colorStr = "0"..colorStr;
    end

    local minDVal = 9999999;
    local similarColor = colorStr;
    for i=1, #(ColorTable) do
        local dVal = getSimilarColorOffsetValue(colorStr, ColorTable[i]);
        if dVal < minDVal then
            minDVal = dVal;
            similarColor = ColorTable[i];
        end
    end

    local num = tonumber(similarColor, 16);
    return num;
end

function getSimilarColorOffsetValue(colorA, colorB)
    if colorB == "-1" then
        return 9999999;
    end
     
    local r1;
    local g1;
    local b1;
    r1, g1, b1 = _ColorHexString2ArgbByte(colorA);
    local r2;
    local g2;
    local b2;
    r2, g2, b2 = _ColorHexString2ArgbByte(colorB);

    return math.sqrt((r1 - r2) * (r1 - r2) + (g1 - g2) * (g1 - g2) + (b1 - b2) * (b1 - b2))
end

function _ColorHexString2ArgbByte(hex)
    if not hex or string.len(hex) ~= 6 then
        return 255,255,255,255
    end
    return tonumber(string.sub(hex,1,1), 16)*16+tonumber(string.sub(hex,2,2), 16), tonumber(string.sub(hex,3,3), 16)*16+tonumber(string.sub(hex,4,4), 16), tonumber(string.sub(hex,5,5), 16)*16+tonumber(string.sub(hex,6,6), 16),255
end

function _ColorHexString2RgbInt(hex)
    if not hex or string.len(hex) ~= 6 then
        return 0
    end
    return tonumber(hex, 16)
end

function GetBlockSrcID(blockid)
    local blockDef = BlockDefCsv:get(blockid);
    if blockDef and blockDef.SrcID and blockDef.SrcID >= 0 then
        return blockDef.SrcID
    end

    return blockid;
end

function IsColorBlock(blockid)
    if blockid == 0 then
        return false
    end

    blockid = GetBlockSrcID(blockid);

    -- 三个特殊的方块
    if blockid == 632 or blockid == 649 or blockid == 666 or blockid == BLOCK_PERISTELE or blockid == BLOCK_TOP_PERISTELE or blockid == 1206 then
        return true
    end

    if ColorBlockIds[blockid] then
        return true
    end

    return false
end

function GetBlockInfoFromColor(color)
    local colorStr = string.format("%x", color)
    local lackLen = 6 - string.len(colorStr);
    for i=1, lackLen do
        colorStr = "0"..colorStr;
    end

    for i=1, #(ColorBlockIdTable) do
        local t = ColorBlockIdTable[i];
        for j=1, #(t.ColorTable) do
            if t.ColorTable[j] == colorStr then
                local blockid = t.BlockIdTable[1];
                return t.BlockIdTable[1], j-1;
            end
        end
    end

    return 667, 0; --没找到的话，默认给一个测试
end

--传入一个颜色，先找到迷你里相似的方块颜色，然后再找到方块
function GetBlockFromColor(color)
    return GetBlockInfoFromColor(getSimilarColor(color))
end

function GetColorFromBlockInfo(blockid, data)
    blockid = GetBlockSrcID(blockid);

    -- 三个特殊的方块
    if blockid == 632 or blockid == 649 or blockid == 1206 then -- or blockid == 666 then
        return tonumber("FFFFFF", 16)
    elseif blockid == 666 then
        return tonumber("f5cd96", 16) --f5cd96
    elseif blockid == BLOCK_PERISTELE or blockid == BLOCK_TOP_PERISTELE then
        return tonumber("FFFFFF", 16)
    end

    for i=1, #(ColorBlockIdTable) do
        for j=1, #(ColorBlockIdTable[i].BlockIdTable) do
            if ColorBlockIdTable[i].BlockIdTable[j] == blockid then
                return _ColorHexString2RgbInt(ColorBlockIdTable[i].ColorTable[data+1])
            end
        end
    end
    return -1
end

function GetDefaultBlockId(blockid)
    blockid = GetBlockSrcID(blockid);

    -- 三个特殊的方块
    if blockid == 632 or blockid == 649 or blockid == 666 or blockid == BLOCK_PERISTELE or blockid == BLOCK_TOP_PERISTELE or blockid == 1206 then
        return blockid
    end

    for i=1, #(ColorBlockIdTable) do
        for j=1, #(ColorBlockIdTable[i].BlockIdTable) do
            if ColorBlockIdTable[i].BlockIdTable[j] == blockid then
                return ColorBlockIdTable[1].BlockIdTable[j]
            end
        end
    end
    return -1
end

function GetDefaultBlockId2(blockid)
    -- 三个特殊的方块
    if blockid == 632 or blockid == 649 or blockid == 666 or blockid == BLOCK_PERISTELE or blockid == BLOCK_TOP_PERISTELE
        or blockid == 1206 then
        return blockid
    end

    for i = 1, #(ColorBlockIdTable) do
        for j = 1, #(ColorBlockIdTable[i].BlockIdTable) do
            if ColorBlockIdTable[i].BlockIdTable[j] == blockid then
                return ColorBlockIdTable[1].BlockIdTable[j]
            end
        end
    end
    return blockid
end

function Color2Index(color)
    for i=1, #(ColorTable) do
        if tonumber(ColorTable[i], 16) == color then
            return i
        end
    end
    return 1
end

function Color2BlockInfo(color, blockid_old)
    blockid_old = GetBlockSrcID(blockid_old);
    if blockid_old == BLOCK_PERISTELE or blockid_old == BLOCK_TOP_PERISTELE then
        return blockid_old, 0
    end

    local blockid_index = 1
    if (blockid_old >= 632 and blockid_old <= 648) or (blockid_old >= 1924 and blockid_old <= 1935)then
        blockid_index = 2
    elseif (blockid_old >= 600 and blockid_old <= 615)  or (blockid_old >= 1900 and blockid_old <= 1911)then
        blockid_index = 3
    elseif (blockid_old >= 616 and blockid_old <= 631)  or (blockid_old >= 1912 and blockid_old <= 1923)then
        blockid_index = 4
    elseif (blockid_old >= 649 and blockid_old <= 665)  or (blockid_old >= 1936 and blockid_old <= 1947)then
        blockid_index = 5
    elseif (blockid_old >= 1120 and blockid_old <= 1135)  or (blockid_old >= 1972 and blockid_old <= 1983)then
        blockid_index = 6
	elseif (blockid_old >= 270 and blockid_old <= 285)  then
        blockid_index = 7
    elseif (blockid_old >= 1206 and blockid_old <=1222) or (blockid_old >= 1948 and blockid_old <= 1959) then
        blockid_index = 8
    end

    for i=1, #(ColorBlockIdTable) do
        for j=1, #(ColorBlockIdTable[i].ColorTable) do
            if ColorBlockIdTable[i].BlockIdTable[blockid_index] ~= 0 and tonumber(ColorBlockIdTable[i].ColorTable[j], 16) == color then
                return ColorBlockIdTable[i].BlockIdTable[blockid_index], j-1
            end
        end
    end
    return ColorBlockIdTable[1].BlockIdTable[blockid_index], 0
end

function GetTeamColor(teamid)
    if teamid > 6 or teamid <= 0 then
        return -1
    end
    return GameMakerTeamColor[teamid]
end

function Color2Team(color)
    for i=1, #(GameMakerTeamColor) do
        if GameMakerTeamColor[i] == color then
            return i
        end
    end
    return -1
end

function GetRandomBlockInfo(blockid_old)
    local color = ColorTable[math.random(NumTotal)]
    if color == "-1" then
        color = "FFFFFF"
    end
    return Color2BlockInfo(tonumber(color, 16), blockid_old)
end

function GetRandomColor()
    local color = ColorTable[math.random(NumTotal)]
    if color == "-1" then
        color = "FFFFFF"
    end
    return tonumber(color, 16)
end

function GetColorTipsString(color)
    local index = Color2Index(color)
    local pos = string.find(ColorNameTable[index], ":")
    local str1 = string.sub(ColorNameTable[index], 1, pos-1)
    local str2 = string.sub(ColorNameTable[index], pos+1)

    if str2 == "0" then
        str2 = ""
    end
    return string.format("%s%s", GetS(tonumber(str1)), str2)
end

